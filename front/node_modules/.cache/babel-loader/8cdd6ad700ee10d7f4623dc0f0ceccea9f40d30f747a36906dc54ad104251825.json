{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createStore } from 'vuex';\nfunction updateLocalStorage(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\nexport default createStore({\n  state: {\n    cart: []\n  },\n  getters: {\n    productQuantity: state => product => {\n      const item = state.cart.find(i => i.id === product.id);\n      if (item) return item.quantity;else return null;\n    },\n    cartItems: state => {\n      return state.cart;\n    }\n  },\n  mutations: {\n    addToCart(state, product) {\n      let item = state.cart.find(i => i.id === product.id);\n      if (item) {\n        item.quantity++;\n      } else {\n        state.cart.push({\n          ...product,\n          quantity: 1\n        });\n      }\n      updateLocalStorage(state.cart);\n    },\n    removeFromCart(state, product) {\n      let item = state.cart.find(i => i.id === product.id);\n      if (item) {\n        if (item.quantity > 1) {\n          item.quantity--;\n        } else {\n          state.cart = state.cart.filter(i => i.id !== product.id);\n        }\n      }\n      updateLocalStorage(state.cart);\n    },\n    updateCartFromLocalStorage(state) {\n      const cart = localStorage.getItem('cart');\n      if (cart) {\n        state.cart = JSON.parse(cart);\n      }\n    }\n  },\n  actions: {},\n  modules: {}\n});","map":{"version":3,"names":["createStore","updateLocalStorage","cart","localStorage","setItem","JSON","stringify","state","getters","productQuantity","product","item","find","i","id","quantity","cartItems","mutations","addToCart","push","removeFromCart","filter","updateCartFromLocalStorage","getItem","parse","actions","modules"],"sources":["/home/thomas/Documents/FAC/M2/e-com/JC-Vinyl/ceri-m1-ecommerce-2022/front/jcvynil/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\nfunction updateLocalStorage(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n\nexport default createStore({\n  state: {\n    cart: [\n\n    ]\n  },\n  getters: {\n    productQuantity: state => product => {\n      const item = state.cart.find(i => i.id === product.id)\n\n      if (item) return item.quantity;\n      else return null;\n    },\n    cartItems: state => {\n      return state.cart;\n    }\n  },\n  mutations: {\n    addToCart (state, product) {\n      let item = state.cart.find(i => i.id === product.id)\n\n      if (item) {\n        item.quantity++;\n      } else {\n        state.cart.push({...product, quantity: 1})\n      }\n\n      updateLocalStorage(state.cart)\n    },\n    removeFromCart (state, product) {\n      let item = state.cart.find(i => i.id === product.id)\n\n      if (item) {\n        if (item.quantity > 1) {\n          item.quantity--;\n        } else {\n          state.cart = state.cart.filter(i => i.id !== product.id)\n        }\n      }\n\n      updateLocalStorage(state.cart)\n    },\n    updateCartFromLocalStorage(state) {\n      const cart = localStorage.getItem('cart');\n      if (cart) {\n        state.cart = JSON.parse(cart);\n      }\n    }\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,MAAM;AAElC,SAASC,kBAAkB,CAACC,IAAI,EAAE;EAChCC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CAAC;AACpD;AAEA,eAAeF,WAAW,CAAC;EACzBO,KAAK,EAAE;IACLL,IAAI,EAAE;EAGR,CAAC;EACDM,OAAO,EAAE;IACPC,eAAe,EAAEF,KAAK,IAAIG,OAAO,IAAI;MACnC,MAAMC,IAAI,GAAGJ,KAAK,CAACL,IAAI,CAACU,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CAAC;MAEtD,IAAIH,IAAI,EAAE,OAAOA,IAAI,CAACI,QAAQ,CAAC,KAC1B,OAAO,IAAI;IAClB,CAAC;IACDC,SAAS,EAAET,KAAK,IAAI;MAClB,OAAOA,KAAK,CAACL,IAAI;IACnB;EACF,CAAC;EACDe,SAAS,EAAE;IACTC,SAAS,CAAEX,KAAK,EAAEG,OAAO,EAAE;MACzB,IAAIC,IAAI,GAAGJ,KAAK,CAACL,IAAI,CAACU,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CAAC;MAEpD,IAAIH,IAAI,EAAE;QACRA,IAAI,CAACI,QAAQ,EAAE;MACjB,CAAC,MAAM;QACLR,KAAK,CAACL,IAAI,CAACiB,IAAI,CAAC;UAAC,GAAGT,OAAO;UAAEK,QAAQ,EAAE;QAAC,CAAC,CAAC;MAC5C;MAEAd,kBAAkB,CAACM,KAAK,CAACL,IAAI,CAAC;IAChC,CAAC;IACDkB,cAAc,CAAEb,KAAK,EAAEG,OAAO,EAAE;MAC9B,IAAIC,IAAI,GAAGJ,KAAK,CAACL,IAAI,CAACU,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CAAC;MAEpD,IAAIH,IAAI,EAAE;QACR,IAAIA,IAAI,CAACI,QAAQ,GAAG,CAAC,EAAE;UACrBJ,IAAI,CAACI,QAAQ,EAAE;QACjB,CAAC,MAAM;UACLR,KAAK,CAACL,IAAI,GAAGK,KAAK,CAACL,IAAI,CAACmB,MAAM,CAACR,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKJ,OAAO,CAACI,EAAE,CAAC;QAC1D;MACF;MAEAb,kBAAkB,CAACM,KAAK,CAACL,IAAI,CAAC;IAChC,CAAC;IACDoB,0BAA0B,CAACf,KAAK,EAAE;MAChC,MAAML,IAAI,GAAGC,YAAY,CAACoB,OAAO,CAAC,MAAM,CAAC;MACzC,IAAIrB,IAAI,EAAE;QACRK,KAAK,CAACL,IAAI,GAAGG,IAAI,CAACmB,KAAK,CAACtB,IAAI,CAAC;MAC/B;IACF;EACF,CAAC;EACDuB,OAAO,EAAE,CACT,CAAC;EACDC,OAAO,EAAE,CACT;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}